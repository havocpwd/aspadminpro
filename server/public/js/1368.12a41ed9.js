"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[1368],{1368:function(e,t,a){a.r(t),a.d(t,{default:function(){return x}});var r=a(3381),s=a(5893),n=a(5255),i=a(1819),l=a(2503),d=a(3749),o=a(3240),c=a(9088),p=a(2515),m=a(9007),u=a(2732),h=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"mt-4"},[t(l.Z,{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.partners,search:e.search,"items-per-page":10},scopedSlots:e._u([{key:"item.actions",fn:function({item:a}){return[t(c.Z,{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editPartner(a.id)}}},[e._v("mdi-pencil")]),t(c.Z,{attrs:{small:""},on:{click:function(t){return e.deletePartner(a.id)}}},[e._v("mdi-delete")])]}},{key:"top",fn:function(){return[t(u.Z,{attrs:{flat:""}},[t(m.Z,{staticClass:"shrink",attrs:{"hide-details":"","append-icon":"mdi-magnify",label:"Search","single-line":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),t(p.Z),t(d.Z,{attrs:{persistent:"","max-width":"900px"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(r.Z,e._g(e._b({attrs:{color:"primary",dark:"",icon:""},on:{click:e.newPartner}},"v-btn",s,!1),a),[t(c.Z,[e._v("mdi-plus-circle")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(s.Z,[t(n.EB,[e.editedMode?t("span",{staticClass:"text-h5"},[e._v("Edit Supplier")]):t("span",{staticClass:"text-h5"},[e._v("Tambah Supplier")])]),t(n.ZB,[t(i.Z,[t(o.Z,{ref:"form",attrs:{"lazy-validation":""}},[t(m.Z,{attrs:{rules:[e=>!!e||"First Name is required"],label:"First Name",required:""},model:{value:e.partner.first_name,callback:function(t){e.$set(e.partner,"first_name",t)},expression:"partner.first_name"}}),t(m.Z,{attrs:{label:"Last Name"},model:{value:e.partner.last_name,callback:function(t){e.$set(e.partner,"last_name",t)},expression:"partner.last_name"}}),t(m.Z,{attrs:{label:"Email"},model:{value:e.partner.email,callback:function(t){e.$set(e.partner,"email",t)},expression:"partner.email"}}),t(m.Z,{attrs:{label:"Phone"},model:{value:e.partner.phone,callback:function(t){e.$set(e.partner,"phone",t)},expression:"partner.phone"}}),t(m.Z,{attrs:{label:"Street"},model:{value:e.partner.address.street,callback:function(t){e.$set(e.partner.address,"street",t)},expression:"partner.address.street"}}),t(m.Z,{attrs:{label:"City"},model:{value:e.partner.address.city,callback:function(t){e.$set(e.partner.address,"city",t)},expression:"partner.address.city"}})],1)],1),t("small",[e._v("*masukan data dengan benar")])],1),t(n.h7,[t(p.Z),t(r.Z,{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDialog}},[e._v(" Close ")]),t(r.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.savePartner(e.editedMode)}}},[e._v(" Save ")])],1)],1)],1),t(r.Z,{attrs:{color:"primary",dark:"",icon:""}},[t(c.Z,[e._v("mdi-printer")])],1)],1)]},proxy:!0}],null,!0)})],1)])},f=[],v=a(3390);class g{getAll(){return v.Z.get("/suppliers")}get(e){return v.Z.get(`/suppliers/${e}`)}create(e){return v.Z.post("/suppliers",e)}update(e,t){return v.Z.put(`/suppliers/${e}`,t)}delete(e){return v.Z["delete"](`/suppliers/${e}`)}deleteAll(){return v.Z["delete"]("/suppliers")}findByName(e){return v.Z.get(`/suppliers?name=${e}`)}}var _=new g,Z={data:()=>({dialog:!1,dialogTitle:"",btnTitle:"",submitted:!1,editedMode:void 0,search:"",headers:[{text:"Name",align:"start",value:"name",class:"primary"},{text:"Email",value:"email",class:"primary"},{text:"Phone",value:"phone",sortable:!1,class:"primary"},{text:"Address",value:"adress",class:"primary"},{text:"Actions",value:"actions",sortable:!1,class:"primary"}],partners:[],partner:{first_name:"",last_name:"",email:"",phone:"",address:{street:"",city:""}}}),mounted(){this.retrievePartners()},methods:{retrievePartners(){_.getAll().then((e=>{this.partners=e.data.partners.map(this.getDisplayPartners)})).catch((e=>{console.log(e)}))},refreshList(){this.retrievePartners()},getDisplayPartners(e){return{id:e.id,name:e.first_name+" "+e.last_name,email:e.email,phone:e.phone,adress:e.address.street+" "+e.address.city}},savePartner(e){var t={first_name:this.partner.first_name,last_name:this.partner.last_name,email:this.partner.email,phone:this.partner.phone,type:"Supplier",address:{street:this.partner.address.street,city:this.partner.address.city}};e?_.update(e,t).then((e=>{console.log(e.data.message),this.refreshList(),this.closeDialog()})).catch((e=>{console.log(e)})):_.create(t).then((e=>{console.log(e.data),this.submitted=!0,this.refreshList(),this.clearPartner(),this.closeDialog()})).catch((e=>{console.log(e)}))},editPartner(e){this.editedMode=e,_.get(e).then((e=>{this.partner={first_name:e.data.first_name,last_name:e.data.last_name,email:e.data.email,phone:e.data.phone,address:{street:e.data.address.street,city:e.data.address.city}},this.dialog=!0})).catch((e=>{console.log(e)}))},deletePartner(e){_["delete"](e).then((()=>{this.refreshList()})).catch((e=>{console.log(e)}))},newPartner(){this.submitted=!1,this.dialog=!0,this.clearPartner()},clearPartner(){this.partner={first_name:"",last_name:"",email:"",phone:"",address:{street:"",city:""}}},closeDialog(){this.dialog=!1,this.editedMode=void 0,this.clearPartner()}}},b=Z,y=a(1001),k=(0,y.Z)(b,h,f,!1,null,null,null),x=k.exports}}]);
//# sourceMappingURL=1368.12a41ed9.js.map